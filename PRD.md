
**版本**: 1.0 
**日期**: 2025年9月5日 
**目标**: 本文档旨在为AI编程助手提供清晰、可执行的产品需求，用于Mnemoflow Web应用的开发。

### **注：关于本文档的演进与协作原则**

本文档（PRD）旨在为 Mnemoflow 的 MVP（最小可行产品）版本提供清晰、可执行的开发蓝图。对于一个创新项目而言，初版规划无法预见所有细节和边缘情况。在开发过程中，当遇到本文档未详尽说明、存在歧义或有待完善之处时（例如：具体的交付标准、模块间的衔接逻辑、数据表结构的微调、api端点的设计等），我们约定遵循以下协作原则：

1. **识别问题**: 当执行者（AI编程助手）发现需求不明确或存在遗漏时，应暂停盲目开发。
    
2. **聚焦MVP**: 所有解决方案都应以服务于**当前MVP核心功能闭环**为第一原则，避免引入非必要的复杂性。
    
3. **主动提出**:如果判断到不能擅自做出合理优雅的决策，执行者需主动、清晰地向我提出识别出的问题，并附带一个或多个基于其专业知识和对项目理解而制定的、简洁的**解决方案建议**。
    
4. **共同决策**: 由项目负责人对提案进行评估和决策。一经确认，该决策将作为对本文档的补充或修正，指导后续的开发工作。但在细节上不必拘泥，可大胆实施。

## 1. 产品概述与目标

### 1.1. 产品简介

Mnemoflow是一款基于认知科学理论，利用大型语言模型（LLM）为核心引擎的智能化英语词汇学习应用。它致力于通过为每个单词生成深度、个性化的记忆场景，革命性地优化学习者的“编码”效率，将枯燥的记词过程转变为高效、深刻且富有探索乐趣的“流动”学习体验。

### 1.2. 核心目标

- **MVP目标**: 开发一个功能完善的Web应用，完整实现“收录 -> 学习 -> 测试 -> 巩固 -> 解惑”的核心学习闭环。
    
- **用户目标**: 为对学习效率和记忆质量有较高要求的严肃学习者（如备考学生、职场人士），提供远超传统记词方法的记忆深度与效率。
    
- **技术目标**: 构建一个稳定、高效、可扩展的全栈应用，并实现精细化的缓存策略以优化性能和API调用成本。
    

## 2. 技术栈与架构要求

本应用将采用现代化的全栈TypeScript Serverless架构。

- **核心框架**:
    
    - **`Next.js 14` (App Router)**: 作为全栈框架，同时负责前端渲染和后端API逻辑（通过API Routes）。
        
- **前端技术**:
    
    - 语言: `TypeScript`
        
    - UI库: `shadcn/ui`
        
    - 样式: `Tailwind CSS`
        
    - 数据请求/状态管理: `React Query (@tanstack/react-query)`，用于高效处理服务端状态和缓存。并使用 `@tanstack/react-query-persist-client` 插件实现客户端缓存持久化到 `LocalStorage`。
        
    - 客户端库: `supabase-js`，用于与Supabase服务进行交互。
        
- **后端即服务 (BaaS)**:
    
    - **`Supabase`**: 作为核心后端服务，提供以下功能：
        
        - **数据库**: 一个完整的 **PostgreSQL** 数据库，用于存储所有应用数据。
            
        - **用户认证**: 使用Supabase Auth实现用户注册、登录、会话管理和第三方登录（可选）。
            
        - **API**: 通过PostgREST自动生成RESTful API，可通过`supabase-js`库安全调用。
            
- **部署与托管**:
    
    - **`Vercel`**: 用于部署整个Next.js应用。Next.js的API Routes会自动部署为 **Vercel Serverless Functions**。
        
- **网络与加速**:
    
    - **`Cloudflare`**: 在Vercel之上提供DNS解析、全球CDN加速和安全防护，确保国内访问速度和稳定性。
        
- **AI模型接口**:
    
    - 所有对外部大语言模型（LLM）的调用，都将封装在 **Next.js API Routes** (`/api/*`) 中执行。**API密钥等敏感信息必须存储在Vercel的环境变量中，绝不能暴露在前端代码里。**
        
    - 本地存储: `IndexedDB` (用于缓存用户单词本及AI助记内容), `LocalStorage` (用于存储用户设置、搜索历史等轻量数据)
        
        


## 3. 功能需求 (Functional Requirements)

### **Epic 0: 用户认证 (User Authentication)**

#### **User Story 0.1: 已授权用户可以通过邮箱和密码登录**

- **描述**: 作为一个已获得授权的用户（如评委、测试人员），我希望能通过预设的邮箱和密码登录Mnemoflow，以便访问我的个人学习数据和应用核心功能。
    
- **验收标准**:
    
    1. 应用提供一个独立的、设计简洁的登录页面 (`/login`)。
        
    2. 登录页面包含“邮箱”和“密码”输入框，以及一个“登录”按钮。
        
    3. **不提供“注册”入口**。UI上不应有任何指向注册页面的链接或按钮。
        
    4. 用户在输入预设的账号密码并点击登录后，应能成功进入应用主界面。
        
    5. 如果用户未登录就尝试访问需要授权的页面（如单词本），应被自动重定向到登录页。
        
    6. 登录逻辑使用 `supabase-js` 客户端库的 `supabase.auth.signInWithPassword()` 函数实现。
        
    7. （**后台准备**）开发者需预先在Supabase的`Authentication`后台，手动为评委、朋友和测试人员创建至少10个用户账号。
    8.  如果登录失败（例如，密码错误），应在表单下方显示一个清晰、友好的错误提示（如“邮箱或密码不正确”）。
        
    9. 如果一个已经登录的用户尝试访问 `/login` 页面，应自动将其重定向到应用主界面（通常是首页或仪表盘）。

#### **User Story 0.2: 用户可以安全地退出登录**

- **描述**: 作为一个已登录的用户，我希望能有一个明确的退出登录选项，以便在完成操作后安全地结束我的会话。
    
- **验收标准**:
    
    1. 在应用主界面的导航栏或用户菜单中，应有一个清晰可见的“退出登录”按钮或链接。
        
    2. 点击“退出登录”按钮后，前端应调用 `supabase.auth.signOut()` 函数。
        
    3. 成功退出后，用户的本地会话信息应被清除，并自动重定向到 `/login` 登录页面。
        

#### **User Story 0.3: 应用能全局管理并响应用户的认证状态**

- **描述**: 作为一个用户，我希望应用能在我操作期间（包括刷新页面）始终“记住”我的登录状态，并在界面上有所体现（例如显示我的用户名），让我有明确的归属感和安全感。
    
- **验收标准**:
    
    1. 应用需在其顶层组件（例如 `layout.tsx` 或 `_app.tsx`）中，使用 `supabase.auth.onAuthStateChange()` 来监听认证状态的实时变化。
        
    2. 通过React Context或类似的状态管理方案，将用户的登录状态（是否登录、用户信息等）提供给应用内的所有组件。
        
    3. 当用户处于登录状态时，应用的导航栏或某个固定位置应显示用户的身份标识（例如，用户的邮箱地址）。
        
    4. 刷新页面后，应用应能通过Supabase的会话恢复机制，快速恢复用户的登录状态，避免让用户感觉“掉线”或需要重新登录。


### Epic 1: 词汇管理与收录 (Vocabulary Management)

#### **User Story 1.1: 用户可以查询单词并查看历史记录**

- **描述**: 作为一个用户，我希望能有一个输入框来查询任何英语单词，以便快速获取其**权威释义**和**AI助记内容**，并将查询过的单词记录下来。
    
- **验收标准**:
    
    1. 页面顶部或核心位置应有一个常驻的搜索组件。
        
    2. 当用户输入单词并提交查询后（通过回车或点击按钮），下方内容区应**分阶段加载**查询结果，以提供最佳体验：
        
        - **阶段一 (即时响应)**: 立即调用后端事实引擎（查询Supabase中的ECDICT数据）。UI应**几乎瞬间**展示出单词的权威基础信息，包括：音标、词性、中英双语释义、考试标签（四级、高考等）。在此阶段，AI助记内容区域应显示一个优雅的加载动画（例如，骨架屏或微光效果）。
            
        - **阶段二 (异步加载)**: 在基础信息展示的同时，后端创意引擎（调用LLM）开始工作。当AI助记内容（包含【助记蓝图】和【记忆场景】）生成完毕后，平滑地替换掉加载动画，完整呈现。
            
    3. 如果查询的单词在词典数据库中不存在，应向用户显示一个清晰、友好的提示，如“未找到该单词，请检查拼写”。
        
    4. 一次成功的查询完成后，该单词应被记录到用户的查询历史中。
        
    5. **（优化）** 查询历史记录应与用户账户绑定，并存储在Supabase的`user_search_history`表中，而非`LocalStorage`。这确保了用户的历史记录可以在不同设备间同步。
        
    6. 当搜索框获得焦点时，应下拉显示最近查询的5-10条历史记录，供用户快速再次访问。
        

#### User Story 1.2: 用户可以将单词添加至单词本

- **描述**: 作为一个用户，当查询到一个生词时，我希望能一键将其添加至我的单词本，并有机会轻松地更换其所属的单词本，以便后续进行学习。

	**验收标准**:

1. 在查询结果页面的显眼位置，应有一个“+ 收录”按钮。
    
2. **（乐观更新）** 点击“+ 收录”按钮后，UI应**立即**将按钮状态更新为“✓ 已收录”的禁用状态，无需等待服务器确认。
    
3. **（智能收录）** 单词将被自动收录到用户的上一次添加的单词本中。（_注：第一次使用时，用户单词本列表中会有一个自带的默认单词本，此时将该单词添加到这里，未来用户可以修改默认单词本。）。
    
4. **（反馈与更改）** 收录成功后，页面底部应出现一个持续3-5秒的“吐司”提示，内容为“已收录至「[单词本名称]」”，并附带一个“更改”按钮。
    
5. 点击“更改”按钮，会弹出一个列表，供用户选择并移动该单词到其他单词本（可多选）。若不点击，提示条将自动消失。
    
6. **（错误处理）** 如果后台的收录请求失败，按钮状态应从“✓ 已收录”回滚至“+ 收录”，并向用户显示错误提示。
    
7. 后台逻辑：收录动作是在`user_word_progress`表中创建一条新的`user_id`与`word_id`的关联记录。
    
8. 当用户再次查询一个已被收录的单词时，“收录”按钮应默认显示为“✓ 已收录”的状态，再次点击可以取消收藏。

#### **User Story 1.3: 用户可以查看和管理自己的单词本内容**

- **描述**: 作为一个用户，我希望能有一个专门的页面来查看我创建的所有单词本，并能进入某个单词本，浏览和管理我收录的所有单词。
    
- **验收标准**:
    
    1. 应用中应有一个“我的单词本” (`/word-lists`) 的主页面或入口。
        
    2. 在此页面上，用户创建的所有单词本应以列表或卡片的形式展示。每个单词本都应显示其名称和包含的单词数量。
        
    3. 点击任意一个单词本，应能进入该单词本的详情页 (`/word-lists/[listId]`)。
        
    4. 详情页会以列表形式，展示出该单词本中收录的所有单词。
        
    5. **（核心管理功能）** 列表中的每一个单词旁边，都应有一个“移除”或“归档”按钮。点击后，该单词会从这个单词本中被移除（即删除`user_word_progress`表中的对应记录）。
        
    6. **（体验优化）** “移除”操作也应采用**乐观更新**。点击后，该单词行应立即从UI上消失，并在后台执行删除操作。如果失败，则恢复显示并给出提示。
        

#### **User Story 1.4: 用户可以创建和命名新的单词本**

- **描述**: 作为一个希望对词汇进行分类管理的用户，我希望能自由地创建多个新的单词本，并为它们指定有意义的名称。
    
- **验收标准**:
    
    1. 在“我的单词本”主页面 (`/word-lists`)，应有一个清晰的“+ 创建新单词本”的按钮或入口。
        
    2. 点击后，会弹出一个对话框或表单，让用户输入新单词本的名称。
        
    3. 用户确认创建后，新的、空的单词本会立即出现在单词本列表中。
      
#### **User Story 1.5: 单词本详情与内容浏览页面 (`/word-lists/[listId]`)**

- **描述**: 作为一个用户，当我进入一个具体的单词本后，我希望能看到其中包含的所有单词列表，了解每一个单词的学习状态，并能方便地对它们进行管理或发起针对性的回顾。
    
- **验收标准**:
    
    1. **（页面头部）** 页面顶部应包含：
        
        - **a. 单词本名称**。
            
        - **b. 整体进度统计** (复用 `4.4` 中的数据)。
            
        - **c. 核心操作按钮**: 一个醒目的 **“开始回顾”** 按钮，点击后将启动 `User Story 1.6` 中定义的“卡片式快速回顾”模式，让用户可以快速浏览整个单词本的助记卡片。
            
    2. **（单词列表）** 头部下方是以列表或表格形式展示的该单词本的全部单词。列表的每一行**必须**包含以下数据：
        
        - **a. 单词 (Word)**: 英文单词本身。
            
        - **b. 核心词义 (Definition)**: 经过 `User Story 3.9` 压缩规则处理后的简短中文释义。
                
        - **c. 下次复习 (Next Review)**: （可选，鼠标悬浮显示）显示由FSRS计算出的下一次复习日期。
            
    3. **（行内操作）** 列表每一行的末尾，应提供一个 **“移除”** 操作按钮,，以及点击后弹出二次确认。
        
    4. **（行交互）** 列表的**整行都应该是可点击的**。点击任意一行，将直接进入“卡片式快速回顾”模式，并**从被点击的这个单词开始**浏览。

#### **User Story 1.6: 用户可以在单词本内进行“卡片式”快速回顾**

- **描述**: 作为一个用户，当我在查看某个单词本的列表时，我希望能直接点击其中的单词，进入一个沉浸式的卡片浏览模式，方便我像翻阅卡片一样，快速地回顾这个列表里的所有单词及其助记内容。
    
- **验收标准**:
    
    1. 在单词本详情页 (`/word-lists/[listId]`)，列表中的每一个单词都应该是可点击的。
        
    2. 点击任意一个单词，应跳转到一个专用的“回顾”视图（复用下面提到的学习时的助记词卡片，URL可以是 `/word-lists/[listId]/review/[word]`)。
        
    3. 该视图的核心，是展示被点击单词的完整AI助记卡片（与`Epic 2`中定义的学习卡片完全一致）。
        
    4. 卡片的左右两侧（或屏幕的固定位置）应有清晰的“上一个” (`<`) 和“下一个” (`>`) 的导航按钮。
        
    5. 点击“下一个”，会平滑地切换到当前单词本列表中的**下一个单词**的助记卡片。
        
    6. 点击“上一个”，会切换到**上一个单词**的助记卡片。
        
    7. 当浏览到列表的第一个或最后一个单词时，对应的“上一个”或“下一个”按钮应变为禁用状态。
        
    8. 页面上应有一个明确的“返回”或“关闭”按钮，让用户可以随时退出回顾模式，返回到单词本详情页。


##### **User Story 1.7: 用户可以随时召唤AI助手进行上下文问答**

- **描述**: 作为一个在学习中遇到个性化问题的用户，我希望能随时唤出一个与当前单词绑定的AI对话窗口，获得即时解答，并且我与AI的讨论历史会被永久保存。
    
- **验收标准**:
    
    1. 在单词查询结果页面 (`User Story 1.1`) 的显眼位置，应有一个常驻的“AI问答”图标按钮。
        
    2. 点击该按钮，一个对话侧边栏应从页面右侧平滑滑出，占据页面约1/3的宽度，且不影响左侧主要内容的浏览。
        
    3. **（上下文感知）** 对话框的顶部应明确标识当前讨论的单词（例如，“正在讨论: splendid”）。
        
    4. **（历史记录）** 如果用户曾就这个单词提问过，再次打开时，对话框应加载并显示之前的完整聊天记录。
        
    5. 用户可以在底部的输入框中输入任何与该单词相关的问题（如“这个词可以用在口语中吗？”或“它和glorious有什么区别？”），AI应提供精准的回答。
        
    6. 对话记录需与用户和单词绑定，并存储在Supabase的一个新表`word_chat_history`中（字段建议：`id`, `user_id`, `word_id`, `conversation_log (jsonb)`)。
        
    7. **（体验优化 - 主动引导）** 当用户首次打开某个单词的对话框时，预设四个问题，同时允许用户修改这四个预设，以降低用户的提问门槛。

#### User Story 1.0: 用户可以使用预设的核心词库（出于成本考虑MVP阶段暂不实现）

- **描述**: 作为一个备考学生，我希望能直接使用平台提供的官方核心词库（如大学英语四级、六级），以便快速开始针对性学习。
    
- **验收标准**:
    
    1. 在“单词本”管理页面，提供预设词库列表。
        
    2. 用户可以选择一个或多个词库加入自己的学习计划。
        
    3. 后端需要预先准备好这些核心词库的数据。
        

### Epic 2: AI深度助记学习 (Core Learning Experience)

#### **User Story 2.1: 用户可以在一个专注的学习界面中查看单词的完整助记卡片**

- **描述**: 作为一个学习者，我希望能在一个设计精良、信息结构清晰的卡片界面中，一站式地获取单词的**权威词典信息**和**AI生成的深度助记内容**，以便进行高效的记忆编码。
    
- **验收标准**:
    
    1. **（单一焦点）** 学习界面应采用卡片式设计，确保用户的注意力在任何时候都只聚焦于当前的一个单词。
        
    2. **（信息分区）** 卡片内容需在视觉上清晰地划分为两个逻辑区域，以匹配我们“事实引擎”+“创意引擎”的架构：
        
        - **A区 - 权威词典区**: 位于卡片上半部分，优先展示客观、准确的词典数据。
            
        - **B区 - AI助记区**: 位于卡片下半部分，展示由AI生成的创造性记忆内容。
            
    3. **（权威词典区内容）** A区必须包含以下从ECDICT数据库中获取的核心信息：
        
        - 单词本身（字体最大、最突出）。
            
        - 国际音标（例如 `/ˈsplendɪd/`）。
            
        - 一个可点击的发音按钮，用于播放单词的真人读音。
            
        - 按词性（如 `adj.` `n.`）清晰分组的中文释义列表。
            
        - 相关的考试标签（如 `CET-4`, `高考`），若存在。
            
    4. **（AI助记区内容）** B区必须包含以下由后端LLM引擎生成的核心信息：
        
        - 明确标识的 `【助记蓝图】` 部分。
            
        - 明确标识的 `【记忆场景】` 部分。
            
        - 一个高质量的、与核心词义相关的中英双语例句。
            
    5. **（MVP范围）** 在MVP阶段，此卡片为**静态内容展示卡**。不包含“交互式填空”、“背景音效”等复杂功能，首要目标是确保信息的清晰呈现和阅读的流畅性。
        
    6. **（可复用性）** 此卡片组件需被设计为高度可复用的。它不仅用于新的学习流程，也直接被 `User Story 1.5` 中定义的“单词本回顾”功能所调用。
        
    7. 当AI助记内容尚未生成好时，对应区域应显示加载中（Loading）状态。

#### **User Story 2.2: 用户可以对AI助记内容的质量进行反馈**

- **描述**: 作为一个希望帮助产品改进、并获得更佳助记内容的用户，我希望能对AI生成的【记忆场景】的有效性，给出一个简单的评价。
    
- **验收标准**:
    
    1. 在AI助记区（B区）的下方，应有两个简洁的、图标化的反馈按钮，例如：“👍 有帮助” 和 “👎 无帮助”。
        
    2. 用户点击任意一个按钮后，该次反馈（包含`user_id`, `word_id`, 和 `rating`）应被记录到Supabase的一个新表 `mnemonic_feedback` 中。
        
    3. 点击后，两个按钮应变为禁用或“已提交”状态，以防止重复提交。
        
    4. **（MVP范围）** 在MVP阶段，我们只负责**收集数据**。这个功能的主要价值在于为您迭代和优化提示词（Prompt）提供数据支撑，是任何AI产品的生命线。

##### **User Story 2.3: 用户可以主动管理和迭代AI生成的助记内容**

- **描述**: 作为一个对记忆质量有更高要求的学习者，我希望能主动地控制AI助记内容的生成，包括重新生成、提出修改要求，以获得最符合我个人认知习惯的记忆材料。
    
- **验收标准**:
    
    1. 在AI助记区（B区）的下方，除了已有的“👍”和“👎”按钮 (`User Story 2.2`)，还应增加一个“**↻ 重新生成**”按钮。
        
    2. 点击“重新生成”，应用会向后端请求一份全新的【助记蓝图】和【记忆场景】，并用加载动画覆盖旧内容，生成后进行替换。
        
    3. **（迭代优化 - 追加要求）** 在“重新生成”按钮旁边，可以增加一个带有重新生成的发送图标。点击后，弹出一个简单的输入框，允许用户输入追加要求（例如，“让它更搞笑一点”或“用科幻的背景”），然后带着这个要求去重新生成。
        
    4. **（复用AI问答）** 在助记卡片页面，同样的位置也应有“AI问答”图标按钮，点击后唤出与`User Story 1.6`中功能完全一致的、**同一个**单词的对话侧边栏，方便用户在学习时随时解惑并回顾历史问题。
        
    5. **（关于版本历史）** 您的“助记词版本历史”想法非常棒！在MVP阶段，为了聚焦核心，我们可以先实现“重新生成”会直接覆盖旧版本。但我们会把“版本历史”功能作为**产品未来迭代的一个高优先级特性**来规划，它将极大地增强产品的专业性。

#### **User Story 2.5: 用户可以直观地理解助记内容的内在逻辑**

- **描述**: 作为一个学习者，我希望能在阅读【记忆场景】时，清晰地看到它是如何应用【助记蓝图】中的逻辑的，以便我能更深刻地理解这个“联想”的过程，而不是仅仅被动地接受。
    
- **验收标准**:
    
    1. **（逻辑可视化链接）** 在【记忆场景】的文本中，那些直接应用了【助记蓝图】中的谐音、词根或联想词的关键部分，应有特殊的视觉样式（例如，用不同的颜色或加上微妙的虚线作为下划线）。
        
    2. **（交互高亮）** 当用户的鼠标悬停（PC端）或手指长按（移动端）在这些带特殊样式的关键词上时，【助记蓝图】中对应的部分会**高亮**显示，形成一个视觉上的联动。
        
    3. **（基础可用性）** 为方便用户做笔记或查阅，卡片上所有的文本内容（如释义、例句、记忆场景等）都应是**可选中的、可复制的**。
        



### **Epic 3: 智能化测试与复习 (Intelligent Testing & Review)**

#### **引言：技术核心**

本模块的调度逻辑将完全基于 **FSRS (Free Spaced Repetition Scheduler)** 算法。前端将集成 `fsrs.js` 库。所有关于“何时复习”和“下次何时复习”的计算，都将交由 FSRS 引擎处理。我们的主要任务是为这个引擎提供清晰的用户输入（即用户对自己记忆程度的评价），并忠实地执行其输出（更新复习计划）。

#### **User Story 3.1: 用户可以清晰地了解并开始每日的复习任务**

- **描述**: 作为一个希望巩固记忆的用户，我希望能在我登录主页时，直观地看到今天有多少单词需要复习，并能一键开始复习流程。
    
- **验收标准**:
    
    1. 在应用主页的“智能工作台”区域，应有一个“**今日复习**”卡片。
        
    2. 该卡片上需明确显示当前**到期需复习的单词总数**（例如，“今日需复习 15 个单词”）。
        
    3. 如果今日没有需要复习的单词，卡片应显示鼓励性信息，如“今日无复习任务，记忆保持良好！”。
        
    4. 卡片上应有一个醒目的“**开始复习**”按钮。点击后，用户将被带到一个全屏的、无干扰的“复习模式”界面 (`/review`)。
        
    5. **（后端逻辑）** “今日需复习”的数量，是通过查询`user_word_progress`表中，所有`next_review_date`早于或等于今天的记录总数来计算的。
	    
    6. 进入复习会话后，单词应按照‘下次复习日期’ (`next_review_date`) 的先后顺序进行排列，最先到期的单词最先出现。
	    
    7. **（会话分块机制）** 系统需设定一个“会话块”的最大容量（建议值为**20**）。
	    
    8. 当“今日需复习”的单词总数**超过**这个容量时：

		- a. 主页卡片上显示的按钮文字应变为
		    
		    **“开始复习 (20个)”** 。
		    
		- b. 用户点击后，只加载队列中最先到期的20个单词进入本次复习会话 。
	
	- **（块间衔接）** 当用户完成这一块的20个单词复习后，在`User Story 3.5`的“复习完成”页面上，内容应调整为 ：
    
	    - a. 祝贺信息：“太棒了！你已完成一轮复习。今日剩余 **[剩余单词数]** 个。”
	        
	    - b. 提供两个清晰的按钮：**`[ 继续下一轮 (20个) ]`** 和 **`[ 今天先到这里 ]`**。
        
	- **（完成状态）** 只有当所有到期的复习单词都完成后，才会显示最终的“今日复习已全部完成”的祝贺语 。

#### **User Story 3.2: 用户可以开启一个“学习会话”来掌握新收录的单词**

- **描述**: 作为一个用户，当我收录了一批新单词后，我希望能进入一个专门的“学习模式”，在学习一个新词后，系统能很快给我一个机会来检验我是否真的记住了它，以加深初次记忆的编码深度。
    
- **验收标准**:
    
    1. **（入口）** 在主页的“智能工作台”区域，应有一个“**学习新词**”卡片，显示当前已收录但**从未学习过**的单词数量（例如，“有 10 个新词待学习”），并附带一个“**开始学习**”按钮。
        
    2. 点击后，进入一个专门的学习会话界面 (`/learn`)。
        
    - **（学习队列初始化）** 系统会将所有待学习的新词，放入一个“学习队列”`L`和一个“待测队列”`T`（初始为空）。
    
	- **（交错学习流程）** 学习会话将按以下循环进行：
	    
	    - a. 从“学习队列”`L`中取出第一个单词（例如 `Word A`）。
	        
	    - b.
	        
	        **展示`Word A`的完整AI助记卡片**（复用Epic 2组件），让用户进行“编码”学习 。此阶段**没有评级按钮**。学习几秒后，手动进入下一步。
	        
	    - c. 系统将`Word A`放入“待测队列”`T`的末尾。
	        
	    - d. **（关键：延迟测试）** 系统检查“待测队列”`T`中，**排在队首的是否是刚刚学习的单词**。
	        
	        - 如果**不是**（意味着中间已经隔了至少一个新词的学习），则从`T`中取出队首单词（例如`Word B`）并对其进行**首次测试**。
	            
	        - 如果**是**（意味着这是学习的第一个单词），则跳过测试，返回步骤 a，继续学习下一个新词。
	            
	- **（首次测试机制）** 对单词进行的“首次测试”**必须采用`User Story 3.3`中定义的“路径B：引导测试流程”**。这是一个包含选择、容错和提示的测试，最适合检验初次记忆。
	    
	- **（首次FSRS启动）** 系统会根据该测试的最终表现（一次选对/二次选对/两次选错），**自动为其评级为 `Good/Hard/Again`**，并计算出初始的FSRS状态和首次复习日期，存入数据库 。
	
	- **（边界情况：会话收尾 - 核心修正）** 当“学习队列”`L`**首次**变为空时，主学习循环结束，但**整个学习会话并未结束**。系统必须进入“**收尾测试阶段**”。
	    
	- **（收尾测试阶段）** 在此阶段，系统应**只执行测试环节**，循环地从“待测队列”`T`中逐一取出所有剩余的单词并进行首次测试，直到`T`也完全清空。
	    
	- **（最终结束）** 只有当“学习队列”`L`和“待测队列”`T`**全部清空**后，整个新词学习会话才算真正结束，并跳转至总结页面。

#### **User Story 3.3: 用户通过“自信度引导”的智能流程完成复习与评级**

- **描述**: 作为一个复习者，我希望能根据自己回忆的清晰度选择不同的检验路径。系统应能根据我的路径和表现，智能地完成评级或推荐评级，让我既能快速确认，又能在判断失误时进行修正，从而实现高效顺畅的复习闭环。
    
- **验收标准**:
    
    1. **（初始状态与路径选择）** 复习卡片的正面应**只显示单词本身**，以鼓励主动回忆 。
        
    2. 卡片下方需提供两个清晰、互斥的按钮供用户选择，明确学习者的初始自信度：
        
        - **A. `[ ✅ 心中有数，直接对答案 ]`**
            
        - **B. `[ 🤔 有点模糊，进入测试 ]`**
            
    
    ---
    
    #### **路径 A: 自信检验流程 (Confident Path)**
    
    3. 当用户点击 **`[ ✅ 心中有数，直接对答案 ]`** 时，视为用户有高自信度的主动回忆。
        
    4. 卡片应立即展开，完整显示该单词的
        
        **AI助记卡片**（完全复用 `Epic 2` 中定义的组件）。
        
    5. **（手动评级与修正机会）** 卡片下方**必须呈现全部四个FSRS评级按钮**（`Again`, `Hard`, `Good`, `Easy`），供用户根据看到的答案和自己的实际回忆情况进行最终的手动评级。
        
        - _设计意图：允许用户在发现自己“过于自信”或回忆有偏差时，有“反悔”和修正评级的机会。_
            
    6. **（体验优化 - 智能预选）** 为加速高频操作，`Easy (简单)` 按钮应有独特的视觉样式（例如：预选中、发光边框或尺寸微调），作为系统的“推荐评级”**。
        
    7. 用户可以点击“推荐评级”一键确认，也可以选择其他评级。完成选择后，该次复习结束，系统自动切换到下一个单词。
        
    
    ---
    
    #### **路径 B: 引导测试流程 (Hint Path)**
    
    8. 当用户点击 **`[ 🤔 有点模糊，进入测试 ]`** 时，视为用户需要外部线索来辅助回忆。
        
    9. 系统应进入“启发式选择测试”**环节，界面下方展开四个中文释义选项。
        
    10. 测试交互遵循“二次作答机会”逻辑：
        
        - a. 用户**首次**选错，该错误选项变为灰色禁用状态。
            
        - b. 同时，界面上浮现出该单词的核心【助记蓝图】**作为提示。
            
        - c. 用户可在剩余选项中进行第二次选择。
            
    11. **（核心 - 自动评级）** 测试结束后，卡片展开显示完整答案，但**不会出现FSRS评级按钮**。系统会根据用户的测试表现，在后台**自动完成评级**，实现“无感操作”：
        
        - a. 如果用户
            
            **第一次就选对** => 自动评级为 **`Good (良好)`** 。
            
        - b. 如果在获得提示后
            
            **第二次才选对** => 自动评级为 **`Hard (困难)`** 。
            
        - c. 如果
            
            **两次都选错** => 自动评级为 **`Again (忘记了)`** ，并将该词加入“重学队列” 。
            
    12. 自动评级完成后，系统应自动切换到下一个单词，整个过程无需用户进行任何额外的手动评级决策。


#### **User Story 3.4: 系统根据用户的评级，自动更新单词的复习计划**

- **描述**: 作为一个用户，我希望系统能在我做出评级后，智能地为我安排下一次的复习时间，我无需手动管理任何复习计划。
    
- **验收标准**:
    
    1. 当用户在前端点击一个评级按钮（如“良好”）时，前端的 `fsrs.js` 库会接收到该单词的当前状态和用户的评级。
        
    2. `fsrs.js` 会立即计算出该单词的**新状态**（包含新的`stability`稳定度, `difficulty`难度等参数）和**下一次的最佳复习日期**（`next_review_date`）。
        
    3. 前端需将 FSRS 计算出的这些新数据，发送到后端，并**更新`user_word_progress`表中对应的记录**。
        
    4. **（数据结构）** `user_word_progress` 表需要增加额外的字段，用于存储 FSRS 所需的状态信息，例如：`stability (float)`, `difficulty (float)`, `due (timestamp)`, `lapses (integer)`等。
        

#### **User Story 3.5: 用户在完成复习后可以获得积极的反馈和总结**

- **描述**: 当我完成今天所有的复习任务后，我希望能看到一个简单的总结，让我获得成就感，并明确知道今天的学习已经完成。
    
- **验收标准**:
    
    1. 当复习队列中的最后一个单词被评级后，应用会跳转到一个“**复习完成**”的祝贺页面。
        
    2. 该页面应包含鼓励性的信息，如“太棒了！今日复习已完成，你的记忆网络又坚固了一分。”
        
    3. 页面上可以展示一个简单的本次复习小结（例如，“共复习 15 词”）。
        
    4. 页面提供一个清晰的“**返回主页**”按钮，引导用户结束本次学习循环。

##### **User Story 3.6: 用户可以随时安全地中断复习会话**

- **描述**: 作为一个用户，如果我在复习过程中需要提前退出，我希望我已经完成的复习进度能够被实时保存，下次回来时无需重复劳动。
    
- **验收标准**:
    
    1. 在复习会话的通用框架中，当用户点击“退出”按钮时，系统应直接将其导航回主页。
        
    2. 用户在该会话中**已经完成评级**的单词，其最新的FSRS状态和下一次复习日期必须已经成功更新到数据库中。
        
    3. 用户**尚未复习**的单词，将继续保留在“今日待复习”的队列中，等待用户下次进入复习会话。

#### **User Story 3.7 : 用户在复习中遗忘的单词会得到即时的穿插式重学**

- **描述**: 作为一个希望高效攻克难点的用户，如果我在复习时忘记了某个单词，我希望它能很快再次出现，而不是堆积到最后，以便我能趁热打铁，在同一个学习会话中就地解决它。
    
- **验收标准**:
    
    1. **（“重学队列”定义）** 系统在内存中维护一个临时的“重学队列”`R`，用于存放本次复习会话中所有被评级为`Again`的单词。
        
    2. **（入队逻辑）** 在复习过程中，一旦有单词的最终评级被确定为`Again` ，该单词应
        
        **立即**被添加入“重学队列”`R`的末尾。
        
    3. **（穿插重学 - 核心逻辑）** 每当一个单词复习完成后，系统会检查主复习队列。如果主队列中还有单词，系统会将“重学队列”`R`中的**第一个单词**，插入到主复习队列中**当前位置之后第 `n` 个位置**。（`n`是一个可配置的参数，建议值为2，即“复习两个其他单词后”）。
        
    4. **（重学形式）** 当这个被插入的单词再次出现时，系统**必须使用`User Story 3.3`中定义的“路径B：引导测试流程”**对其进行重学测试。
        
    5. **（重学后的评级）** 系统根据重学测试的表现，再次为该单词自动评级（`Good/Hard/Again`），并更新其FSRS状态。

#### **User Story 3.8: 系统需支持一种基于现有词库的、匹配词性的轻量化测试选项生成方案**

- **描述**: 作为一个后台系统，为了能快速、低成本地为单词测试提供选项，我需要一套不依赖于AI的备用生成逻辑。该逻辑能根据优先级规则，从用户个性化的单词本和公共词库中，智能地抽取并组合成一组有效的测试干扰项，并优先确保干扰项与测试词汇的词性相匹配，以提升测试质量。
    
- **验收标准**:
    
    1. **（触发条件）** 本流程在需要为单词 `W` 生成测试题时被触发。
        
    2. **（选项池优先级）** 系统必须严格按照以下优先级顺序，组合成一个包含**3个**干扰项的列表：
        
        - **a. 优先级1**: 从用户正在记忆的单词本中（不含`W`）随机抽取 **2** 个单词 + 从ECDICT总词库中随机抽取 **1** 个单词。
            
        - **b. 优先级2**: 若用户单词本只有2词，则从中抽取 **1** 个 + 从总词库抽取 **2** 个。
            
        - **c. 优先级3**: 若用户单词本只有1词，则从总词库抽取 **3** 个。
            
    3. **（词性匹配逻辑 - 核心）**
        
        - a. 系统首先需要确定目标单词`W`的核心词性（如 `adj.`）。
            
        - b. 在执行上述第2条的抽取逻辑时，对于每一次抽取，系统都**必须优先**尝试从目标池（用户单词本或总词库）中，寻找一个与`W`核心词性**相同的**单词。
            
        - c. **（容错机制）** 为了防止因词库中缺少对应词性的单词而导致流程卡死，每次“带词性”的尝试应设定一个合理的尝试上限（如循环查找50次）。如果达到上限仍未找到，系统应**自动放宽限制**，随机抽取一个**任意词性**的单词作为补充，以确保流程总能继续。
            
    4. **（排重规则）** 必须确保所有抽取的干扰项单词本身不与`W`重复，且干扰项之间也互不重复。
        
    5. **（已知局限性）** 本轻量化方案不包含语义排重检测。在极低概率下，可能抽中与正确答案近义的干扰项。此问题将在后续优化中解决，mvp阶段不作考虑。
        
    6. **（选项随机化）** 最终由1个正确答案和3个干扰项组成的选项列表，在返回给前端前，其顺序**必须**经过随机打乱。
        

---

#### **User Story 3.9: 系统需对原始词典释义进行压缩处理以优化选项展示**

- **描述**: 作为一个负责数据处理的模块（前端或后端），为了确保测试选项在界面上清晰、简洁、易于阅读，我需要一套标准的解析规则，将ECDICT中冗长、多义的原始释义字符串，稳定地处理成一段简短的“核心词义”，用于在选项按钮上展示。
    
- **验收标准**:
    
    1. **（输入与输出定义）**
        
        - **输入**: ECDICT原始释义字符串，格式可能为 `pos1. 义项1a；义项1b\npos2. 义项2a...`
            
        - **输出**: 标准化的“核心词义”字符串，格式为 `pos. 核心义项` 或仅 `核心义项`。
            
    2. **（解析逻辑）** 释义压缩必须遵循以下处理步骤：
        
        - a. **分离词性块**: 首先，通过换行符 `\n` 切分字符串，只取**第一块**内容进行处理（例如，对于 `adj. ...\n n. ...`，只取 `adj. ...` 部分）。
            
        - b. **识别词性 (POS)**: 在第一块内容中，从字符串开头匹配常见的词性标签（如 `adj.`, `adv.`, `n.`, `v.`, `prep.` 等）。如果匹配成功，则记录该词性。
            
        - c. **提取核心义项**: 将识别出的词性标签从字符串中移除，然后对剩余部分按常见分隔符（`；`、`;`、`，`、`,`)进行切分，只取**第一段**作为核心义项。
            
        - d. **清理与拼接**: 对提取出的核心义项进行前后空格清理，然后与第 `b` 步中记录的词性（如果存在）拼接成最终结果。
            
    3. **（无词性兼容）** 如果在第 `b` 步中未能识别出任何标准词性标签，则直接执行第 `c` 步，最终结果不带词性前缀。
        
    4. **（长度截断）** 拼接成的最终字符串，其总长度如果超过预设的最大值（建议为**12个字符**），则必须从尾部进行截断，并附加上省略号`...`。
        
    5. **（实现案例）** | 原始释义 | 处理后输出 | 遵循规则 | | :--- | :--- | :--- | | `adj. 壮丽的；辉煌的；极好的` | `adj. 壮丽的` | 规则a,b,c,d | | `adj. 相等的，相当的\n n. 等价物` | `adj. 相等的` | 规则a,b,c,d | | `苹果` | `苹果` | 规则c,d（无词性） | | `n. 一种非常长的中文定义` | `n. 一种非常长的...` | 规则b,c,d,4 |

#### **User Story 3.10: 用户应能随时发起“自定义学习”会话**（现阶段不实现）

- **描述**: 作为一个积极的学习者，我希望能不受FSRS算法“到期复习”的限制，随时可以从我的任意一个单词本中发起一个自定义的练习会话，以便进行额外的巩固或预习。
    
- **验收标准**:
    
    1. **（功能入口）** 在主页的“智能工作台”区域，除了“今日复习”和“学习新词”外，应增加一个常驻的、永远可点击的 **“自定义学习”** 卡片或按钮。
        
    2. **（会话配置）** 点击后，弹出一个简单的配置界面，让用户选择：
        
        - a.
            
            **目标单词本**: 从他创建的所有单词本列表中选择一个 。
            
        - b. **学习数量**: 选择本次学习的单词数量（例如提供 10, 20, 50 等选项）。
            
    3. **（选词逻辑）** 系统会从用户选定的单词本中，优先选择**最久没有复习过**的`N`个单词来组成此次学习会话的队列。
        
    4. **（流程复用）** “自定义学习”会话开始后，其内部的测试流程**完全复用 `User Story 3.3` 所定义的“自信度引导”流程**。
        
    5. **（数据同步）** 这不是一次“模拟练习”。用户在自定义学习中对每个单词的评级，都**必须**被FSRS引擎接收，并**正常更新**该单词的下一次复习日期 。这确保了用户的每一次学习行为都会被系统有效记录。

### **Epic 4: 学习与复习界面规划**

#### **User Story 4.1: 沉浸式学习/复习会话界面**

- **描述**: 作为一个学习者，当我开始一轮学习或复习时，我希望能进入一个无干扰的、类似“禅模式”的界面。这个界面应该移除所有不必要的元素，让我能完全聚焦于眼前的单词卡片，并流畅地完成每一次交互。
    
- **设计哲学**:
    
    - **极简主义**: 界面中唯一的视觉主角就是**单词卡片**。
        
    - **流畅动效**: 卡片之间的切换、状态的变化（如显示选项、揭示答案）都必须伴随着平滑、优雅的过渡动画，以强化“心流”体验。
        
- **验收标准**:
    
    1. **（整体布局）** 主内容区以一个**居中的卡片**为核心，卡片下面堆叠着若干张卡片，点击下一个上一个时轮换式出现。
        
    2. **（进度指示）** 在界面的顶部或底部，应有一个**不引人注目的进度条**或“`5 / 20`”这样的数字指示器，让用户对当前会话的进度有基本感知。
        
    3. **（退出机制）** 在界面的一个固定角落（如左上角），应有一个清晰“`< 退出`”按钮，允许用户随时中断会话并返回仪表盘（需遵循`User Story 3.6`的安全中断逻辑）。
        
    4. **（卡片交互 - 核心）** 卡片的设计必须能流畅地承载 `User Story 3.3` 中定义的“自信度引导”流程：
        
        - **a. 初始状态**: 卡片正面只显示**单词本身**，下方是两个核心路径按钮：`[ ✅ 心中有数，直接对答案 ]` 和 `[ 🤔 有点模糊，进入测试 ]`。
            
        - **b. 自信路径 (Path A)**: 点击`[ ✅ 心中有数 ]`后，卡片应有一个优雅的“揭示”动效（渐变浮现），完整展示AI助记内容，同时下方平滑地出现四个FSRS评级按钮（“Easy”被预选）。
            
        - **c. 引导路径 (Path B)**: 点击`[ 🤔 有点模糊 ]`后，卡片下方会平滑地展开四个中文释义选项。
            
        - **d. 引导交互**: 当用户在Path B中首次选错时，该选项应有“变灰禁用”的动画，同时【助记蓝图】从卡片上方或中部“浮现”出来，整个过程不应有任何生硬的跳动。
            
    5. **（卡片切换）** 当一个单词的评级完成后，当前卡片应有一个得体的退场动画（如向左滑出或向下淡出），同时下一张卡片以同样的动画逻辑入场，形成一种有节奏的“流动感”。
        
    6. **（响应式设计）** 在移动设备上，卡片和选项按钮必须能完美地适应屏幕宽度，确保操作的舒适性。
        

---

#### **User Story 4.2: 会话完成/小结界面**

- **描述**: 作为一个学习者，当我完成一轮（或全部）学习任务后，我希望能看到一个积极的、有用的总结界面。它应该能给我带来成就感，并清晰地告诉我接下来可以做什么。
    
- **设计哲学**:
    
    - **积极正向**: 整个界面的基调应该是鼓励和庆祝，而不是一份冷冰冰的数据报告。
        
    - **清晰引导**: 为用户提供明确、有限的下一步操作选项，避免选择困难。
        
- **验收标准**:
    
    1. **（进入条件）** 当用户完成一轮“分块”的学习/复习（如20个单词），或完成所有每日任务后，进入此页面。
        
    2. **（核心文案 - 动态化）** 页面的核心应是一句大号的、根据情境变化的祝贺语：
        
        - **a. 如果还有剩余任务**: 显示如“太棒了！你已完成一轮复习。今日剩余 **[剩余数量]** 个。”
            
        - **b. 如果全部任务完成**: 显示如“完美！今日复习已全部完成，你的记忆网络更加坚固了。”
            
    3. **（操作按钮 - 动态化）** 根据情境，提供不同的操作按钮：
        
        - **a. 如果还有剩余任务**: 提供两个主次分明的按钮 `[ 继续下一轮 ]` 和 `[ 今天先到这里 ]`。
            
        - **b. 如果全部任务完成**: 只提供一个主按钮 `[ 返回仪表盘 ]`。
            
    4. **（难点词汇回顾 - 闭环设计）**
        
        - 如果本次会话中有根据 `User Story 3.7` 被判定为“重学后再次遗忘”的顽固词，它们必须在此页面的下方被列出。
            
        - 该区域的标题应为“本次遇到的难点词汇：”。
            
        - 每个列出的单词都应是**可点击的**。点击后，以**模态框（Modal）**的形式，直接展示该单词的完整AI助记卡片，方便用户进行即时的、无跳转的深度回顾。
            
    5. **（视觉设计）** 可加入一些轻量、美好的视觉元素，如微妙的彩带动画或一个点亮的徽章，以增强用户的成就感。

#### **User Story 4.3: “学习新词”的单词本选择页面**

- **描述**: 作为一个拥有多个单词本、希望进行主题式学习的用户，当我决定学习新词时，我希望能被引导至一个专门的选择页面。在这个页面上，我可以看到各个单词本的学习进度，并从中选择一个进行专注学习，从而让我的学习过程更具计划性和目的性。复习时，由于FSRS算法的存在，就不存在选择单词本复习一说。
    
- **验收标准**:
    
    1. **（页面入口）** 当用户在仪表盘上点击“开始学习”按钮，且系统检测到有未学习的新词时，用户将被导航至本“选择单词本学习”页面。
        
    2. **（复习流程不变）** 此规则**不适用**于“复习”流程。点击仪表盘上的“开始复习”按钮，将**永远**直接进入`User Story 4.1`中定义的、由FSRS统一调度的沉浸式复习会话界面。
        
    3. **（页面布局）**
        
        - 页面应有清晰的标题，如“选择学习内容”。
            
        - 最顶部应提供一个醒目的 **“[ 学习全部 xx 个新词 ]”** 的选项，以保留一键学习所有新词的便捷路径。
            
        - 下方是以卡片形式展示的、所有**包含未学习新词**的单词本。
            
    4. **（单词本卡片数据展示）** 列表中的每一个单词本卡片，都必须清晰地展示以下核心数据，以辅助用户决策：
        
        - **a. 单词本名称**: 例如，“雅思核心词汇”。
            
        - **b. 本次可学新词数**: 这是最重要的行动指令，需醒目展示。例如，“**10** 个新词待学习”。
            
        - **c. 整体背词进度**: 用于展示该单词本的宏观掌握情况，包含：
            
            - **进度数值**: 如“**150 / 250 已学习**”。
                
            - **视觉化进度条**: 与数值匹配的进度条，提供直观感受。
                
    5. **（“背词进度”判定标准）**
        
        - **“总词数”**: 指该单词本收录的单词总数。
            
        - **“已学习词数”**: 指该单词本中，已经拥有FSRS学习记录（即至少在“学习新词”会話中出现过一次并被评级）的单词数量。一个单词一旦被评级，即从“新词”变为“已学习”。
            
    6. **（交互与跳转）**
        
        - 用户点击任意单词本卡片（或顶部的“学习全部”选项）后，应立即进入`User Story 4.1`中定义的沉浸式学习会话界面。
            
        - 该学习会话的队列中，将**仅包含**用户所选定的那个单词本（或全部）中的**未学习的新词**。
            
    7. **（零态设计）** 如果一个单词本中所有单词均已“学习”过（没有新词），则它在此选择页面上可以不显示，或以置灰/禁用的状态显示，并注明“已全部学习”。

### **Epic 5 奠基：Mnemoflow 设计总体风格 - “认知极简主义”**

#### **1. 设计哲学：服务于“心流”**

- **少即是多 (Less is More)**: 界面上只保留最核心的元素。每一个像素的存在，都必须服务于“查询、学习、复习”这三个核心动作。
    
- **引导视觉焦点**: 通过布局、色彩和动效，主动地、强势地将用户的注意力引导到当前最重要的任务上。
    
- **无摩擦交互**: 所有的操作都应追求零延迟的反馈和流畅的过渡，让用户感觉不到界面的存在，完全沉浸在学习内容中。
    

#### **2. 色彩系统：深邃与能量**

- **背景层 (Base)**: `#1A1A1A` **深空灰**。这不是纯黑，而是一种更有层次感的深灰色，能有效降低视觉疲劳，让内容元素更突出。
    
- **表面层 (Surface)**: 这是所有卡片、模态框、侧边栏的背景色。我们将采用**微光玻璃 (Subtle Glassmorphism)** 效果。具体实现为：
    
    - 背景色：`#2A2A2A` 带有 `80%` 的不透明度。
        
    - 背景模糊 (Backdrop Blur)：一个轻微的模糊效果，让它能隐约透出后方的背景。
        
    - 边框：`1px` 宽的、半透明的白色（`rgba(255, 255, 255, 0.1)`），营造出精致的轮廓感。
        
- **文字层 (Text)**:
    
    - **主色**: `#F0F0F0` **月光白**。用于正文和主要标题，保证可读性。
        
    - **次要色**: `#A0A0A0` **中性灰**。用于辅助性文字、提示语和占位符。
        


#### **3. 字体排版：清晰与优雅**

- **字体族**: 全局使用现代无衬线字体，推荐 **Inter** (英文) 和 **苹方SC (PingFang SC)** (中文)，以保证在各种屏幕上的清晰度和现代感。
    
- **字号体系**: 建立一个严格的、有韵律感的字号层级。例如：
    
    - `36px` (特大标题，用于英雄区域)
        
    - `24px` (一级标题)
        
    - `18px` (二级标题/卡片标题)
        
    - `16px` (正文，基准字号)
        
    - `14px` (辅助/次要文字)
        
- **行距与间距**: **“呼吸感”是关键**。所有元素的间距，都遵循 **8px** 的网格系统（即所有间距都是8的倍数，如 `8px`, `16px`, `24px`, `32px`）。宽裕的行距和元素间距，是营造高级感和专注氛围的核心。
    

#### **4. 组件风格与交互**

- **卡片 (Cards)**: 遵循“表面层”的微光玻璃风格，带有 `16px` 的圆角，给人一种柔和、精致的感觉。
    
- **按钮 (Buttons)**:
    
    - **主按钮 (Primary)**: 填充“星云”渐变色，鼠标悬停时，渐变会产生一个微妙的、流动的光效。
        
    - **次要按钮 (Secondary)**: 透明背景，带有 `1px` 的“星云”渐变色边框。
        
- **输入框 (Inputs)**:
    
    - **默认状态**: 半透明深灰色背景，无边框。
        
    - **激活/焦点状态**: 出现 `1px` 的“星云”渐变色外边框，清晰地告知用户当前焦点。
        
- **动效 (Animation)**:
    
    - **原则**: **流畅，而非花哨**。动效的目的是为了**解释状态的转换**。
        
    - **应用**:
        
        - 页面切换：淡入淡出。
            
        - 模块加载：内容从下往上、带有透明度变化的“优雅滑入”。
            
        - 按钮悬停：颜色和阴影的平滑过渡（`duration: 0.3s`）。
            
        - 卡片翻转（复习时）：一个拟真的、带有透视效果的3D翻转。
            

---

**总结一下“认知极简主义”风格：**

它是一个以**深色模式**为基底，通过**宽裕的空间感**、**精致的玻璃拟态**和一道**流光溢彩的“能量色”**来构建的、高度聚焦的设计系统。

这个奠基石将确保Mnemoflow的每一个页面、每一个组件，都能在视觉和体验上，精准地传达出您产品“**专注、智能、高效**”的核心价值。


## 4. 非功能性需求 (Non-Functional Requirements)

- **性能**:
    
    - 页面加载时间：主要页面的首次加载时间应在3秒以内。
        
    - API响应：非调用ai的API请求应在500ms内返回。
        
    - **多级缓存**: 必须实现贯穿前后台的三级缓存策略，以减少对外部AI服务接口的重复调用，降低成本并提高响应速度。
        
- **响应式设计**:
    
    - 应用必须在桌面端、平板和移动端主流浏览器上提供流畅、一致的用户体验。UI布局应能自适应不同屏幕尺寸。
        
- **可访问性 (Accessibility)**:
    
    - 确保关键交互元素（按钮、输入框）有合适的Aria-labels，颜色对比度符合WCAG标准。



